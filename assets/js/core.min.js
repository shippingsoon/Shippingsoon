function base_url(e){e=e?e.toLowerCase():"";return document.getElementsByTagName("base")[0].href+e}function statistics(){var e=document.getElementById("statistic_id").value;if(e)$.post(base_url("core/statistics/"+e))}function core_modal(e,t,n){$("#core-modal .modal-body div").attr("class",!n?"alert alert-danger":"");$("#core-modal .modal-header").html(e);$("#core-modal .modal-body div").html(t);$("#core-modal").modal()}function update_carousel(e,t){var t=e.find(t?".active":".item:first");var n=t.attr("data-title"),r=t.attr("data-subtitle");e.find("h1.opensans").html(n);e.find("p.opensans").html(r)}function get_search_results(e,t,n){if($(".search-query").attr("data-enabled")!=1)return false;var e=e===undefined||e===null?$("#offset").val():e,t=t===undefined||t===null?$("#limit").val():t,n=n===undefined||n===null?$(".search-query").tagit("assignedTags").join("-"):n;$.ajax({type:"POST",url:base_url("portfolio/search/"+e+"/"+t+"/"+encodeURIComponent(n)),dataType:"json",success:function(e){if(e){$(".featured-content").empty();$(".pager").html(e.pager);$("title").html(n?n.replace(/-/g,", ")+" - Search results":"Search - Shipping Soon");$(".portfolio-banner h1").html(n?"Search results for: <b>"+n.replace(/-/g,", ")+"</b>":"Search");$.each(e.articles,function(e,t){var n=$(".featured-projects .template").clone();n.removeClass("template").removeClass("hide");n.find(".title a").html(t.title);n.find(".title a, .overlay > a:eq(0)").attr({title:"Read more about "+t.title,href:base_url((t.category!="Portfolio"?"blog/"+t.category:"portfolio")+"/"+t.slug+"/"+t.article_id)});n.find(".subtitle").html(t.description);n.find(".photo-frame").prepend($("<img />").attr({src:base_url("uploads/articles/img/"+t.article_id+"/0.jpg"),alt:t.title,"class":"img-responsive"}));if(t.source_link)n.find(".overlay > a:eq(1)").removeClass("hide").attr({title:"View "+t.title+"'s source code",href:t.source_link});else if(t.live_link)n.find(".overlay > a:eq(2)").removeClass("hide").attr({title:"View "+t.title,href:t.live_link});$(".featured-content").append(n)});if(e.articles.length<1)$("<h2>No results found for: <b>"+n.replace(/-/g,", ")+"</b></h2>").addClass("centered opensans light-weight").appendTo(".featured-content")}},error:function(e){console.log(e)}});if($(".search-query").attr("data-onpopstate")==0)history.pushState({offset:e,limit:t,tags:n},"Next",base_url("portfolio/search/"+e+"/"+t+"/"+encodeURIComponent(n)))}window.onpopstate=function(e){if(e.state){$("#offset").val(e.state.offset);$("#limit").val(e.state.limit);$(".search-query").attr({"data-onpopstate":1,"data-enabled":0});$(".search-query").tagit("removeAll");var t=e.state.tags.split("-");for(var n in t)$(".search-query").tagit("createTag",t[n]);$(".search-query").attr("data-enabled",1);get_search_results(e.state.offset,e.state.limit,e.state.tags);$(".search-query").attr("data-onpopstate",0)}};jQuery(document).ready(function(e){e("input, textarea").placeholder();e(".core-search .glyphicon-search").click(function(t){e(".core-search").submit()});e(".core-search").submit(function(t){t.preventDefault();var n=e(this).attr("action"),r=e.trim(e(this).find("input").val());if(r)window.location=n+"/"+encodeURIComponent(r)+"#search"});e(".core-search input").keyup(function(){this.value=this.value.replace(/[^a-zA-Z0-9+]+/g,"")});e(".core-search input").focusin(function(){e(this).parent().addClass("focused")});e(".core-search input").blur(function(){e(this).parent().removeClass("focused")});e.ajaxSetup({type:"POST",cache:false,contentType:"application/x-www-form-urlencoded; charset=utf-8",async:false,dataType:"json"});setInterval("statistics()",30*1e3);if(e("body").hasClass("core")&&e("body").hasClass("index")){e("#contact-carousel").carousel({interval:8e3,pause:"hover",wrap:true});update_carousel(e("#contact-carousel"),false);e("#contact-carousel").on("slid.bs.carousel",function(t){update_carousel(e(this),true)})}else if(e("body").hasClass("portfolio")&&e("body").hasClass("search")){if(e("#offset").val()==0&&!e(".search-query").val()){history.replaceState({offset:0,limit:12,tags:""},"search",base_url("portfolio/search/0/12"));console.log("test")}var t="search for projects";e(".search-query").tagit({availableTags:e("#auto_complete").length>0?e("#auto_complete").val().split(","):"",autocomplete:{delay:0,minLength:2},allowSpaces:false,singleFieldDelimiter:",",caseSensitive:false,placeholderText:t,fieldName:"tags[]",afterTagAdded:function(t,n){e(".ui-widget-content").attr("placeholder","");get_search_results(0)},afterTagRemoved:function(n,r){if(e(".search-query").tagit("assignedTags").length==0)e(".ui-widget-content").attr("placeholder",t);get_search_results(0)}});e(".ui-autocomplete-input").focus();e(".tagit-new input").keyup(function(){this.value=this.value.replace(/[^a-zA-Z0-9+]+/g,"")});e(".search-box .glyphicon-search").click(function(e){get_search_results(0)});e(".pager").on("click","a",function(t){t.preventDefault();e("#offset").val(e(this).attr("data-offset"));get_search_results();e("html, body").animate({scrollTop:e(".portfolio-search").offset().top},300)});e(".portfolio-search .dropdown-menu a").click(function(t){t.preventDefault();var n=e(this).parent().parent();var r=n.attr("data-type"),i=e(this).text(),s=e(".search-query").tagit("assignedTags"),o=e(this).attr("data-value");e(".dropdown-toggle."+r).html(i+' <span class="caret"></span>');e.each(e(".search-query").tagit("assignedTags"),function(t,r){n.find("a").each(function(t,n){if(r.toLowerCase()==n.innerHTML.toLowerCase()){e(".tagit .tagit-label").each(function(t,n){if(r.toLowerCase()==n.innerHTML.toLowerCase()){s.splice(s.indexOf(r),1);e(".search-query").val(s.join(","));e(this).parent().remove()}})}})});if(o!="all")e(".search-query").tagit("createTag",o);else get_search_results(0,12)})}else if(e("body").hasClass("login")){e(".terminal-wrapper .fa").tooltip();e(".login-terminal").terminal("create",{})}else if(e("body").hasClass("about")){e(".proficiency-list a").tooltip()}if(e("body").hasClass("blog")||e("body").hasClass("portfolio")){e(".tagcloud a").tagcloud({size:{start:10,end:16,unit:"pt"}});prettyPrint();e(".fancybox").fancybox()}if(e("body").hasClass("core")||e("body").hasClass("portfolio")){var n=e("#project-filters").attr("data-ignore");if(n)e(".featured-content .all").not("."+n).hide();e(".portfolio-filters .filter-btn").click(function(t){var n=e(this).is("button")?"btn-info":"active";e(".portfolio-filters .filter-btn").removeClass(n);e(this).addClass(n);var r=e(this).attr("data-filter");e(".featured-content > div").each(function(t,n){var i=e(this).attr("data-filters").replace(/ /g,"").split(",");e.inArray(r,i)!=-1?e(this).fadeIn("slow"):e(this).fadeOut("fast")});return false})}if(e("body").hasClass("core")||e("body").hasClass("contact")||e("body").hasClass("user")){e(".waypoint-container").waypoint("sticky",{stuckClass:"waypoint",offset:200});e(".core-form").submit(function(t){e.ajax({url:e(this).attr("action"),type:"POST",data:e(this).find("input, textarea").not("input[type=submit]").serialize(),success:function(e){if(e.success){if(e.redirect_url||e.redirect_url=="")document.location.href=base_url(e.redirect_url)}if(e.show_modal)core_modal(e.header,e.body,e.status)},error:function(e){}});return false})}})