(function(e){function r(n,r){e(t.class_name).addClass("prompt").attr({"data-prompt":n,"data-process-id":r})}function i(e){var t=e.split(" ");if(n[t[0]])n[t[0]].apply(null,t.splice(1));else s(e+": command not found")}function s(n){e("<p></p>",{text:n,css:{margin:"0",clear:"both"}}).appendTo(e(t.class_name))}var t={class_name:"terminal-container",user:"root",host:"shippingsoon",directory:"~",css:{display:"block","font-family":'"Courier New", Courier, monospace',"font-size":"1.3em","line-height":"1.3em",color:"SpringGreen","background-color":"black",width:"100%",height:"450px","max-height":"450px",overflow:"hidden"}};var n={help:function(){var e=["login [username] [password]","ls [directory_name]","cd [directory_name]","clear"];for(var t=0;t<e.length;t++)s(e[t])},login:function(){if(arguments.length!=2)s("login: Cannot possibly work without effective root");else{e.ajax({type:"POST",url:base_url("user/login"),data:{email:arguments[0],password:arguments[1]},dataType:"json",success:function(e){if(e.success){if(e.redirect_url||e.redirect_url=="")document.location.href=base_url(e.redirect_url)}else s("login: Invalid credentials")}})}},clear:function(){e(t.class_name).html(e(".terminal-left:last, .terminal-right:last"))},sudo:function(){r("[sudo] password for "+t.user+":",1)},ls:function(){s("Desktop Documents Downloads Music")},cd:function(){var e=["Desktop","Documents","Downloads","Music"],n="~";if(arguments[0]){if(e.indexOf(arguments[0])==-1)s("bash: cd: "+arguments[0]+": No such file or directory");else n="~/"+arguments[0]}t.directory=n}};var o={create:function(){for(var n=0;n<arguments.length;n++)this.extend(t,arguments[n]);return this.each(function(){var n=e(this);n.addClass(t.class_name?t.class_name:"terminal-container");t.class_name="."+t.class_name;n.css(t.css);e("<div></div>",{"class":"terminal-left",css:{"float":"left","background-color":"inherit",color:"inherit",clear:"both",width:"auto","margin-right":"8px"},text:t.user+"@"+t.host+":"+t.directory+"$"}).appendTo(n);e("<div></div>",{"class":"terminal-right",css:{"background-color":"inherit",overflow:"hidden"}}).appendTo(n);e("<input />",{css:{width:"100%",color:"inherit","background-color":"inherit","font-family":"inherit","font-size":"1em",border:"0px",outline:"0px",margin:"0"},type:"text"}).appendTo(n.find(".terminal-right"));e(this).on("keydown",".active",function(n){if(n.keyCode==13){var r=e.trim(e(this).val());if(r){e(this).removeClass("active");var s=e(t.class_name).find(".terminal-left").first().clone(),o=e(t.class_name).find(".terminal-right").first().clone();e(this).attr("readonly","readonly");o.find("input").addClass("active").removeAttr("readonly").val("");switch(parseInt(e(t.class_name).attr("data-process-id"))){case 1:e("#password").val(r);break;default:i(r)}if(e(t.class_name).hasClass("prompt")){s.html(e(t.class_name).attr("data-prompt"));e(t.class_name).removeClass("prompt")}else s.html(t.user+"@"+t.host+":"+t.directory+"$");s.appendTo(e(t.class_name));o.appendTo(e(t.class_name));e(t.class_name).find(".active").focus();e(t.class_name).scrollTop(e(t.class_name).prop("scrollHeight"))}}});e(this).find(".terminal-right input").addClass("active").focus()})},init:function(){}};e.fn.terminal=function(e){if(o[e])return o[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return o.init.apply(this,arguments)}})(jQuery)